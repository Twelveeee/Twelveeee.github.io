<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="十二的编程笔记" href="https://blog.twelveeee.top/rss.xml"><link rel="alternate" type="application/atom+xml" title="十二的编程笔记" href="https://blog.twelveeee.top/atom.xml"><link rel="alternate" type="application/json" title="十二的编程笔记" href="https://blog.twelveeee.top/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><link rel="canonical" href="https://blog.twelveeee.top/2020/NetworkPrinciples/data%20link%20layer/"><title>数据链路层 - 网络原理 - 计算机科学 | Twelveeee = 十二的编程笔记 = hello world</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">数据链路层</h1><div class="meta"><span class="item" title="创建时间：2020-06-06 23:01:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2020-06-06T23:01:00+08:00">2020-06-06</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>14k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>13 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Twelveeee</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/img/bgimg_79.webp"></li><li class="item" data-background-image="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/img/bgimg_62.webp"></li><li class="item" data-background-image="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/img/bgimg_43.webp"></li><li class="item" data-background-image="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/img/bgimg_88.webp"></li><li class="item" data-background-image="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/img/bgimg_27.webp"></li><li class="item" data-background-image="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/img/bgimg_22.webp"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computerScience/" itemprop="item" rel="index" title="分类于 计算机科学"><span itemprop="name">计算机科学</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computerScience/networkPrinciple/" itemprop="item" rel="index" title="分类于 网络原理"><span itemprop="name">网络原理</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.twelveeee.top/2020/NetworkPrinciples/data%20link%20layer/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Twelveeee"><meta itemprop="description" content="hello world, 十二的编程笔记"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="十二的编程笔记"></span><div class="body md" itemprop="articleBody"><h1 id="3数据链路层"><a class="anchor" href="#3数据链路层">#</a> 3. 数据链路层</h1><p><strong>本章重点</strong>：<br>数据链路层的三个基本功能：<strong>封装成帧、透明传输、差错检测</strong><br>点对点协议 PPP<br>以太网 MAC 层的硬件地址<br>交换机的工作原理<br>扩展的以太网：虚拟局域网技术</p><p>数据链路层使用的信道主要有以下两种类型：<br><strong>点对点信道</strong>：这种信道使用一对一的点对点通信方式。<br><strong>广播信道</strong>：这种信道使用一对多的广播通信方式，因此过程比较复杂。广播信道上连接的主机很多，因此必须使用专用的共享信道协议来协调这些主机的数据发送。<br>不同的链路层可能采用不同的数据链路层协议</p><p><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200603203603889.png" alt="image-20200603203603889"></p><h2 id="31-使用点对点信道的数据链路层"><a class="anchor" href="#31-使用点对点信道的数据链路层">#</a> 3.1 使用点对点信道的数据链路层</h2><p><strong>3.1.1 数据链路和帧</strong><br><strong>链路 (link)</strong> 是一条无源的点到点的物理线路段，中间没有任何其他的交换结点，一条链路只是一条通路的一个组成部分。<br><strong>数据链路 (data link)</strong> 除了物理线路外，还必须有通信协议来控制这些数据的传输。若把实现这些协议的硬件和软件加到链路上，就构成了数据链路。现在最常用的方法是使用适配器（即网卡）来实现这些协议的硬件和软件。一般的适配器都包括了数据链路层和物理层这两层的功能。<br><strong>数据链路层传送的是帧</strong><br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200603203831184.png" alt="image-20200603203831184"><br>数据链路层不必考虑物理层如何实现比特传输的细节。甚至还可以更简单地设想好像是沿着两个数据链路层之间的水平方向把帧直接发送到对方。</p><p>3.1.2 三个基本问题<br>数据链路层协议有许多种，但有三个基本问题则是共同的。这三个基本问题是：<br>1. 封装成帧、2. 透明传输、3. 差错控制</p><p>1. 封装成帧<br><strong>封装成帧 (framing)</strong> 就是在一段数据的前后分别添加首部和尾部，然后就构成了一个帧。确定帧的界限。<br>首部和尾部的一个重要作用就是进行帧定界。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200603204223226.png" alt="image-20200603204223226"><br>当数据是由可打印的 ASCII 码组成的文本文件时，帧定界可以使用特殊的帧定界符。<br>控制字符 SOH (Start Of Header) 放在一帧的最前面，表示帧的首部开始。另一个控制字符 EOT (End Of Transmission) 表示帧的结束。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200603204253981.png" alt="image-20200603204253981"></p><p>2. 透明传输</p><p>如果数据中的某个字节的二进制代码恰好和 SOH 或 EOT 一样，数据链路层就会错误地 “找到帧的边界”<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200603204338746.png" alt="image-20200603204338746"><br>解决方法：<strong>字节填充</strong> (byte stuffing) 或<strong>字符填充</strong> (character stuffing)。<br>发送端的数据链路层在数据中出现控制字符 “SOH” 或 “EOT” 的前面插入一个转义字符 “ESC” (其十六进制编码是 1B)。<br>接收端的数据链路层在将数据送往网络层之前删除插入的转义字符。<br>如果转义字符也出现在数据当中，那么应在转义字符前面插入一个转义字符 ESC。当接收端收到连续的两个转义字符时，就删除其中前面的一个。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200603204517309.png" alt="image-20200603204517309"></p><p>3. 差错检测<br>在传输过程中可能会产生比特差错：1 可能会变成 0 而 0 也可能变成 1。<br>在一段时间内，传输错误的比特占所传输比特总数的比率称为<strong>误码率</strong> BER (Bit Error Rate)。<br>误码率与信噪比有很大的关系。<br>为了保证数据传输的可靠性，在计算机网络传输数据时，必须采用各种差错检测措施。</p><p>循环冗余检验的原理 ：<br>在数据链路层传送的帧中，广泛使用了<strong>循环冗余</strong>检验 CRC 的检错技术。<br>在发送端，先把数据划分为组。假定每组 k 个比特。<br>假设待传送的一组数据 M = 101001（现在 k = 6）。我们在 M 的后面再添加供差错检测用的 n 位冗余码一起发送。<br>循环冗余码 CRC 在发送端编码和接收端校验时，都可以利用 ** 事先约定的生成多项式 G (X)** 来得到，<br>K 位要发送的信息位可对应于一个 (k-1) 次多项式 K (X),<br>r 位冗余位则对应于一个 (r-1) 次多项式 R (X)，<br>由 r 位冗余位组成的 n=k+r 位码字则对应于一个 (n-1) 次多项式 <code>T(X)=X r *K(X)+R(X)</code> 。</p><p>循环冗余码 CRC 具体实现过程:<br>（1）CRC 码在发送端和接收端校验时，事先规定一个生成多项式：G (X)(r 次多项式即 r+1 位)；<br>（2） k 位信息位对应多项式 K (X)；<br>（3）r 位冗余位对应一个（r-1）次多项式 R (X)；<br>（4）用 X r *K (X) 除以生成多项式 G (X)，得到的余数就是冗余码<br>（5) 最后要发送的帧：T (X)= X r *K (X)+R (X)</p><p>冗余码的计算 :<br>用二进制的模 2 运算进行 2n 乘 M 的运算，这相当于在 M 后面添加 n 个 0。<br>得到的 (k + n) 位的数除以事先选定好的长度为 (n + 1) 位的除数 P，得出商是 Q 而余数是 R，余数 R 比除数 P 少 1 位，即 R 是 n 位。<br>将余数 R 作为冗余码拼接在数据 M 后面发送出去。<br>例子：<br>k = 6, M = 101001。设 n = 3, 除数 P = 1101，被除数是 2nM = 101001000。<br>模 2 运算的结果是：商 Q = 110101，余数 R = 001。<br>把余数 R 作为冗余码添加在数据 M 的后面发送出去。发送的数据是：2nM + R<br>即：101001001，共 (k + n) 位。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200603211228067.png" alt="image-20200603211228067"><br><strong>帧检验序列 FCS</strong><br>在数据后面添加上的冗余码称为<strong>帧检验序列 FCS</strong> (Frame Check Sequence)。<br>循环冗余检验 CRC 和帧检验序列 FCS 并不等同。<br>CRC 是一种常用的检错方法，而 FCS 是添加在数据后面的冗余码。<br>FCS 可以用 CRC 这种方法得出，但 CRC 并非用来获得 FCS 的唯一方法。</p><p>接收端对收到的每一帧进行 CRC 检验<br>(1) 若得出的余数 R = 0，则判定这个帧没有差错，就接受 (accept)。<br>(2) 若余数 R  0，则判定这个帧有差错，就丢弃。<br>但这种检测方法并不能确定究竟是哪一个或哪几个比特出现了差错。<br>只要经过严格的挑选，并使用位数足够多的除数 P，那么出现检测不到的差错的概率就很小很小。</p><p>常见几种 CRC 生成多项式国际标准</p><p>1.G (X)=X16+X15+X2+1 (IBM 公司设计 CRC-16）<br>2.G (X)=X16+X12+X5+1 (ITU 设计 CRC-CCITT）<br>3.G (X)=X12+X11+X3+X2+X 十 l<br>4.G (X)=X32+X26+X23+X22+X16+X12+X11+X10+X8+X7+X5+X4+X3+X+1 (IEEE 以太网 CRC-32）</p><h2 id="32-点对点协议-ppp"><a class="anchor" href="#32-点对点协议-ppp">#</a> 3.2 点对点协议 PPP</h2><p><strong>3.2.1 PPP 协议的特点</strong><br>对于点对点的链路，目前使用得最广泛的数据链路层协议是点对点协议 PPP (Point-to-Point Protocol)。<br>用户使用拨号电话线接入互联网时， 用户计算机和 ISP 进行通信时所使用的数据链路层协议就是 PPP 协议。<br>PPP 协议在 1994 年就已成为互联网的正式标准。<br>用户到 ISP 的链路使用 PPP 协议 .</p><p>PPP 协议应满足的需求<br>简单 —— 这是<strong>首要的要求</strong>。<br>封装成帧 —— 必须规定特殊的字符作为帧定界符。<br>透明性 —— 必须保证数据传输的透明性。<br>多种网络层协议 —— 能够在同一条物理链路上同时支持多种网络层协议。<br>多种类型链路 —— 能够在多种类型的链路上运行。<br>差错检测 —— 能够对接收端收到的帧进行检测，并立即丢弃有差错的帧。<br>检测连接状态 —— 能够及时自动检测出链路是否处于正常工作状态。<br>最大传送单元 —— 必须对每一种类型的点对点链路设置最大传送单元 MTU 的标准默认值，促进各种实现之间的互操作性。<br>网络层地址协商 —— 必须提供一种机制使通信的两个网络层实体能够通过协商知道或能够配置彼此的网络层地址。<br>数据压缩协商 —— 必须提供一种方法来协商使用数据压缩算法。</p><p>PPP 协议不需要的功能<br>纠错 、流量控制、序号、多点线路 、半双工或单工链路</p><p>PPP 协议有三个组成部分：<br>(1) 一个将 IP 数据报封装到串行链路的方法。<br>(2) 链路控制协议 LCP (Link Control Protocol)。<br>(3) 网络控制协议 NCP (Network Control Protocol)。</p><p><strong>3.2.2 PPP 协议的帧格式</strong><br>PPP 帧的首部和尾部分别为 4 个字段和 2 个字段。<br>标志字段 F = 0x7E （符号 “0x” 表示后面的字符是用十六进制表示。十六进制的 7E 的二进制表示是 01111110）。<br>地址字段 A 只置为 0xFF。地址字段实际上并不起作用。<br>控制字段 C 通常置为 0x03。<br>PPP 是面向字节的，所有的 PPP 帧的长度都是<strong>整数字节</strong>。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200603212157567.png" alt="image-20200603212157567"><br>当 PPP 用在同步传输链路时，协议规定采用硬件来完成<strong>比特填充</strong>（和 HDLC 的做法一样）。<br>当 PPP 用在异步传输时，就使用一种特殊的<strong>字符填充</strong>法。<br><strong>字符填充 ：</strong><br>将信息字段中出现的每一个 0x7E 字节转变成为 2 字节序列 (0x7D, 0x5E)。<br>若信息字段中出现一个 0x7D 的字节，则将其转变成为 2 字节序列 (0x7D, 0x5D)。<br>若信息字段中出现 ASCII 码的控制字符（即数值小于 0x20 的字符），则在该字符前面要加入一个 0x7D 字节，同时将该字符的编码加以改变<br><strong>零比特填充</strong> ：<br>PPP 协议用在 SONET/SDH 链路时，使用同步传输（一连串的比特连续传送）。这时 PPP 协议采用零比特填充方法来实现透明传输。<br>在发送端，只要发现有 5 个连续 1，则立即填入一个 0。<br>接收端对帧中的比特流进行扫描。每当发现 5 个连续 1 时，就把这 5 个连续 1 后的一个 0 删除。</p><p>PPP 协议之所以不使用序号和确认机制是出于以下的考虑：<br>在数据链路层出现差错的概率不大时，使用比较简单的 PPP 协议较为合理。<br>在因特网环境下，PPP 的信息字段放入的数据是 IP 数据报。数据链路层的可靠传输并不能够保证网络层的传输也是可靠的。<br>帧检验序列 FCS 字段可保证无差错接受。</p><p><strong>3.2.3 PPP 协议的工作状态</strong><br>当用户拨号接入 ISP 时，路由器的调制解调器对拨号做出确认，并建立一条物理连接。<br>PC 机向路由器发送一系列的 LCP 分组（封装成多个 PPP 帧）。<br>这些分组及其响应选择一些 PPP 参数，并进行网络层配置，NCP 给新接入的 PC 机分配一个临时的 IP 地址，使 PC 机成为因特网上的一个主机。<br>通信完毕时，NCP 释放网络层连接，收回原来分配出去的 IP 地址。接着，LCP 释放数据链路层连接。最后释放的是物理层的连接。<br>可见，PPP 协议已不是纯粹的数据链路层的协议，它<strong>还包含了物理层和网络层的内容</strong>。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200603212740123.png" alt="image-20200603212740123"></p><h2 id="33-使用广播信道的数据链路层"><a class="anchor" href="#33-使用广播信道的数据链路层">#</a> 3.3 使用广播信道的数据链路层</h2><p><strong>3.3.1 局域网的数据链路层</strong><br>局域网最主要的特点是：<br>网络为一个单位所拥有；地理范围和站点数目均有限。<br>局域网具有如下主要优点：<br>具有广播功能，从一个站点可很方便地访问全网。局域网上的主机可共享连接在局域网上的各种硬件和软件资源。 便于系统的扩展和逐渐地演变，各设备的位置可灵活调整和改变。提高了系统的可靠性、可用性和残存性。<br>局域网拓扑结构<img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200603215958543.png" alt="局域网拓扑结构"><br>以太网的两个标准<br><strong>DIX Ethernet V2</strong> 是世界上第一个局域网产品（以太网）的规约。<br><strong>IEEE 802.3</strong> 是第一个 IEEE 的以太网标准。<br>DIX Ethernet V2 标准与 IEEE 的 802.3 标准只有很小的差别，因此可以将 802.3 局域网简称为 “以太网”。<br>严格说来，“以太网” 应当是指符合 DIX Ethernet V2 标准的局域网</p><p>数据链路层的两个子层<br>为了使数据链路层能更好地适应多种局域网标准，IEEE 802 委员会就将局域网的数据链路层拆成两个子层：<br><strong>逻辑链路控制 LLC</strong> (Logical Link Control) 子层；<br><strong>媒体接入控制 MAC</strong> (Medium Access Control) 子层。<br>与接入到传输媒体有关的内容都放在 MAC 子层，而 LLC 子层则与传输媒体无关。<br>不管采用何种协议的局域网，对 LLC 子层来说都是透明的。</p><p>适配器的作用<br>网络接口板又称为<strong>通信适配器 (adapter)</strong> 或<strong>网络接口卡 NIC</strong> (Network Interface Card)，或 “<strong>网卡</strong>”。<br>适配器的重要功能：<br>进行串行 / 并行转换。对数据进行缓存。在计算机的操作系统安装设备驱动程序。实现以太网协议。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200603220411410.png" alt="计算机通过适配器和局域网进行通信 "><br>计算机通过适配器和局域网进行通信</p><p><strong>3.3.2 CSMA/CD 协议</strong><br>最初的以太网是将许多计算机都连接到一根总线上。当初认为这样的连接方法既简单又可靠，因为总线上没有有源器件。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200603220956430.png" alt="image-20200603220956430"><br>以太网采用<strong>广播</strong>方式发送<br>总线上的每一个工作的计算机都能检测到 B 发送的数据信号。<br>由于只有计算机 D 的地址与数据帧首部写入的地址一致，因此只有 D 才接收这个数据帧。<br>其他所有的计算机（A, C 和 E）都检测到不是发送给它们的数据帧，因此就丢弃这个数据帧而不能够收下来。<br>在具有广播特性的总线上实现了<strong>一对一</strong>的通信。</p><p><strong>CSMA/CD 协议</strong><br>CSMA/CD 含义：<strong>载波监听多点接入 / 碰撞检测</strong> (Carrier Sense Multiple Access with Collision Detection) 。<br>“<strong>多点接入</strong>” 表示许多计算机以多点接入的方式连接在一根总线上。<br>“<strong>载波监听</strong>” 是指每一个站在发送数据之前先要检测一下总线上是否有其他计算机在发送数据，如果有，则暂时不要发送数据，以免发生碰撞。<br>总线上并没有什么 “载波”。因此， “载波监听” 就是用电子技术检测总线上有没有其他计算机发送的数据信号。<br>“<strong>碰撞检测</strong>” 就是计算机边发送数据边检测信道上的信号电压大小。<br>当几个站同时在总线上发送数据时，总线上的信号电压摆动值将会增大（互相叠加）。<br>当一个站检测到的信号电压摆动值超过一定的门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了碰撞。<br>所谓 “碰撞” 就是发生了冲突。因此 “碰撞检测” 也称为 “冲突检测”<br>在发生碰撞时，总线上传输的信号产生了严重的失真，无法从中恢复出有用的信息来。<br>每一个正在发送数据的站，一旦发现总线上出现了碰撞，就要立即停止发送，免得继续浪费网络资源，然后等待一段随机时间后再次发送</p><p>为什么要进行碰撞检测？<br>由于电磁波在总线上的传播速率是有限的，当某个站监听到总线是空闲时，也可能总线并非真正是空闲的。<br>A 向 B 发出的信息，要经过一定的时间后才能传送到 B。<br>B 若在 A 发送的信息到达 B 之前发送自己的帧 (因为这时 B 的载波监听检测不到 A 所发送的信息)，则必然要在某个时间和 A 发送的帧发生碰撞。<br>碰撞的结果是两个帧都变得无用。<br>所以需要在发送期间进行碰撞检测，以检测冲突。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200604014236272.png" alt="image-20200604014236272"><br><strong>CSMA/CD 重要特性</strong><br>使用 CSMA/CD 协议的以太网不能进行全双工通信而<strong>只能进行双向交替通信</strong>（半双工通信）。<br>每个站在发送数据之后的一小段时间内，存在着遭遇碰撞的可能性。<br>这种<strong>发送的不确定性</strong>使整个以太网的平均通信量远小于以太网的最高数据率。<br>最先发送数据帧的站，在发送数据帧后至多经过时间 2t （两倍的端到端往返时延）就可知道发送的数据帧是否遭受了碰撞。<br>以太网的端到端往返时延 2t 称为争用期，或<strong>碰撞窗口</strong>。<br>经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞。</p><p>二进制指数类型退避算法 (truncated binary exponential type)<br>发生碰撞的站在停止发送数据后，要推迟（退避）一个随机时间才能再发送数据。<br>基本退避时间取为争用期 2t。<br>从整数集合 [0, 1, … , (2^k -1)] 中随机地取出一个数，记为 r。重传所需的时延就是 r 倍的基本退避时间。<br>参数 k 按下面的公式计算：<br><code>k = Min[重传次数, 10]</code><br>当 k&lt;=10 时，参数 k 等于重传次数。<br>当重传达 16 次仍不能成功时即丢弃该帧，并向高层报告。</p><p><strong>强化碰撞</strong><br>当发送数据的站一旦发现发生了碰撞时：<br>(1) 立即停止发送数据；<br>(2) 再继续发送若干比特的人为干扰信号 (jamming signal)，以便让所有用户都知道现在已经发生了碰撞。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200604015247393.png" alt="image-20200604015247393"><br>CSMA/CD 协议的要点<br>(1) 准备发送。但在发送之前，必须先检测信道。<br>(2) 检测信道。若检测到信道忙，则应不停地检测，一直等待信道转为空闲。若检测到信道空闲，并在 96 比特时间内信道保持空闲（保证了帧间最小间隔），就发送这个帧。<br>(3) 检查碰撞。在发送过程中仍不停地检测信道，即网络适配器要边发送边监听。这里只有两种可能性：<br>①发送成功：在争用期内一直未检测到碰撞。这个帧肯定能够发送成功。发送完毕后，其他什么也不做。然后回到 (1)。<br>②发送失败：在争用期内检测到碰撞。这时立即停止发送数据，并按规定发送人为干扰信号。适配器接着就执行指数退避算法，等待 r 倍 512 比特时间后，返回到步骤 (2)，继续检测信道。但若重传达 16 次仍不能成功，则停止重传而向上报错。</p><p><strong>3.3.3 使用集线器的星形拓扑</strong><br>传统以太网最初是使用粗同轴电缆，后来演进到使用比较便宜的细同轴电缆，最后发展为使用更便宜和更灵活的双绞线。<br>采用双绞线的以太网采用星形拓扑，在星形的中心则增加了一种可靠性非常高的设备，叫做<strong>集线器 (hub)</strong>。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200604015343963.png" alt="image-20200604015343963"><br>1990 年，IEEE 制定出星形以太网 10BASE-T 的标准 802.3i。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200604015407623.png" alt="image-20200604015407623"><br>星形以太网 10BASE-T<br>使用无屏蔽双绞线，采用星形拓扑。<br>每个站需要用两对双绞线，分别用于发送和接收。<br>双绞线的两端使用 RJ-45 插头。<br>集线器使用了大规模集成电路芯片，因此集线器的可靠性提高。<br>10BASE-T 的通信距离稍短，每个站到集线器的距离不超过 100 m。<br>这种 10 Mbit/s 速率的无屏蔽双绞线星形网的出现，既降低了成本，又提高了可靠性。 具有很高的性价比。<br>10BASE-T 双绞线以太网的出现，是局域网发展史上的一个非常重要的里程碑，它为以太网在局域网中的统治地位奠定了牢固的基础。<br>从此以太网的拓扑就从总线形变为更加方便的星形网络，而以太网也就在局域网中占据了统治地位。</p><p>集线器的一些特点<br>(1) 集线器是使用电子器件来模拟实际电缆线的工作，因此整个系统仍然像一个传统的以太网那样运行。<br>(2) 使用集线器的以太网在<strong>逻辑上仍是一个总线网</strong>，各工作站使用的还是 CSMA/CD 协议，并共享逻辑上的总线。<br>(3) 集线器很像一个多接口的转发器，<strong>工作在物理层</strong>。<br>(4) 集线器采用了专门的芯片，进行自适应串音回波抵消，减少了近端串音。<img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200604015645270.png" alt="image-20200604015645270"> 具有三个接口的集线器</p><p><strong>3.3.4 以太网的信道利用率</strong><br>多个站在以太网上同时工作就可能会发生碰撞。<br>当发生碰撞时，信道资源实际上是被浪费了。因此，当扣除碰撞所造成的信道损失后，以太网总的信道利用率并不能达到 100%。<br>假设 t 是以太网单程端到端传播时延。则争用期长度为 2t，即端到端传播时延的两倍。检测到碰撞后不发送干扰信号。<br>设帧长为 L (bit)，数据发送速率为 C (bit/s)，则帧的发送时间为 <code>T0 = L/C (s)</code> 。<br>要提高以太网的信道利用率，就必须减小 t 与 T0 之比。<br>在以太网中定义了参数 α，它是以太网单程端到端时延 t 与帧的发送时间 T0 之比： <code>α=t/T0</code><br>α →0，表示一发生碰撞就立即可以检测出来， 并立即停止发送，因而信道利用率很高。<br>α 越大，表明争用期所占的比例增大，每发生一次碰撞就浪费许多信道资源，使得信道利用率明显降低<br>对以太网参数 α 的<strong>要求</strong>是：<br>当数据率一定时，以太网的连线的长度受到限制，否则 t 的数值会太大。<br>以太网的帧长不能太短，否则 T0 的值会太小，使 α 值太大。</p><p><strong>3.3.5 以太网的 MAC 层</strong><br>重点介绍：MAC 层的硬件地址、MAC 帧的格式</p><p>1.MAC 层的硬件地址<br>在局域网中，<strong>硬件地址</strong>又称为<strong>物理地址</strong>，或 <strong>MAC 地址</strong>。<br>802 标准所说的 “地址” 严格地讲应当是每一个站的 “名字” 或<strong>标识符</strong>。<br>但鉴于大家都早已习惯了将这种 48 位的 “名字” 称为 “地址”，所以本书也采用这种习惯用法，尽管这种说法并不太严格。<br>请注意，如果连接在局域网上的主机或路由器安装有多个适配器，那么这样的主机或路由器就有多个 “地址”。更准确些说，这种 48 位 “地址” 应当是某个接口的标识符。<br>IEEE 802 标准规定 MAC 地址字段可采用 6 字节 (48 位) 或 2 字节 ( 16 位) 这两种中的一种。<br>IEEE 的注册管理机构 RA 负责向厂家分配地址字段 6 个字节中的前三个字节 (即高位 24 位)，称为<strong>组织唯一标识符</strong>。<br>地址字段 6 个字节中的后三个字节 (即低位 24 位) 由厂家自行指派，称为<strong>扩展唯一标识符</strong>，必须保证生产出的适配器<strong>没有重复地址</strong>。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200604020335387.png" alt="image-20200604020335387"><br>一个地址块可以生成 2^24 个不同的地址。这种 48 位地址称为 MAC-48，它的通用名称是 EUI-48。<br>生产适配器时，6 字节的 MAC 地址已被固化在适配器的 ROM，因此，MAC 地址也叫做<strong>硬件地址</strong> (hardware address) 或<strong>物理地址</strong>。<br>“MAC 地址” 实际上就是适配器地址或适配器标识符 EUI-48。</p><p>单站地址，组地址，广播地址<br>IEEE 规定地址字段的<strong>第一字节的最低位</strong>为 I/G 位。I/G 表示 Individual / Group。<br>当 <strong>I/G 位 = 0</strong> 时，地址字段表示一个<strong>单站地址</strong>。<br>当 <strong>I/G 位 = 1</strong> 时，表示<strong>组地址</strong>，用来进行多播（以前曾译为组播）。此时，IEEE 只分配地址字段前三个字节中的 23 位。<br>当 I/G 位分别为 0 和 1 时，一个地址块可分别生成 223 个单个站地址和 223 个组地址。<br>所有 48 位都为 1 时，为广播地址。只能作为目的地址使用。</p><p>全球管理与本地管理<br>IEEE 把地址字段第一字节的<strong>最低第 2 位</strong>规定为 G/L 位，表示 Global / Local。<br>当 G/L 位 = 0 时，是<strong>全球管理</strong>（保证在全球没有相同的地址），厂商向 IEEE 购买的 OUI 都属于全球管理。<br>当 G/L 位 = 1 时， 是<strong>本地管理</strong>，这时用户可任意分配网络上的地址。</p><p>适配器从网络上每收到一个 MAC 帧就首先用硬件检查 MAC 帧中的 MAC 地址。<br>如果是发往本站的帧则收下，然后再进行其他的处理。<br>否则就将此帧丢弃，不再进行其他的处理。<br>“发往本站的帧” 包括以下三种帧：<br><strong>单播</strong> (unicast) 帧（一对一）<br><strong>广播</strong> (broadcast) 帧（一对全体）<br><strong>多播</strong> (multicast) 帧（一对多）<br>所有的适配器都至少能<strong>够识别</strong>前两种帧，即能够识别单播地址和广播地址。<br>有的适配器可用编程方法识别多播地址。<br><strong>只有目的地址才能</strong>使用广播地址和多播地址。<br>以<strong>混杂方式</strong> (promiscuous mode) 工作的以太网适配器只要 “听到” 有帧在以太网上传输就都接收下来。</p><p>2**.MAC 帧的格式 **<br>常用的以太网 MAC 帧格式有两种标准 ：<br>DIX Ethernet V2 标准<br>IEEE 的 802.3 标准<br>最常用的 MAC 帧是<strong>以太网 V2</strong> 的格式。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200604020758567.png" alt="image-20200604020758567"><br>以太网 V2 的 MAC 帧格式<br>目的地址字段 6 字节<br>源地址字段 6 字节<br>类型字段 2 字节，类型字段用来标志上一层使用的是什么协议，以便把收到的 MAC 帧的数据上交给上一层的这个协议。<br>数据字段 46 ~ 1500 字节，数据字段的正式名称是 <strong>MAC 客户数据字段</strong>。最小长度 64 字节  18 字节的首部和尾部 = 数据字段的最小长度（46 字节）<br>FCS 字段 4 字节，当数据字段的长度小于 46 字节时，应在数据字段的后面加入整数字节的填充字段，以保证以太网的 MAC 帧长不小于 64 字节。<br>在帧的前面插入（硬件生成）的 8 字节中，第一个字段共 7 个字节，是前同步码，用来迅速实现 MAC 帧的比特同步。第二个字段 1 个字节是帧开始定界符，表示后面的信息就是 MAC 帧。<br>无效的 MAC 帧，帧的长度不是整数个字节；用收到的帧检验序列 FCS 查出有差错；数据字段的长度不在 46 ~ 1500 字节之间。有效的 MAC 帧长度为 64 ~ 1518 字节之间。</p><p>与以太网 V2 MAC 帧格式相似，区别在于：<br>(1) IEEE 802.3 规定的 MAC 帧的第三个字段是 “<strong>长度 / 类型</strong>”。<br>当这个字段值大于 0x0600 时（相当于十进制的 1536），就表示 “类型”。这样的帧和以太网 V2 MAC 帧完全一样。<br>当这个字段值小于 0x0600 时才表示 “长度”。<br>(2) 当 “长度 / 类型” 字段值小于 0x0600 时，数据字段必须装入上面的逻辑链路控制 LLC 子层的 LLC 帧</p><h2 id="34-扩展的以太网"><a class="anchor" href="#34-扩展的以太网">#</a> 3.4 扩展的以太网</h2><p><strong>3.4.1 在物理层扩展以太网</strong><br>使用光纤扩展<br>主机使用光纤（通常是一对光纤）和一对光纤调制解调器连接到集线器。<br>很容易使主机和几公里以外的集线器相连接。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200604021216700.png" alt="image-20200604021216700"></p><p>使用集线器扩展<br>使用多个集线器可连成更大的、多级星形结构的以太网。<br>例如，一个学院的三个系各有一个 10BASE-T 以太网，可通过一个主干集线器把各系的以太网连接起来，成为一个更大的以太网。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200604021243139.png" alt="image-20200604021243139"><br>优点：<br>使原来属于不同碰撞域的以太网上的计算机能够进行跨碰撞域的通信。<br>扩大了以太网覆盖的地理范围。<br>缺点：<br>碰撞域增大了，但总的吞吐量并未提高。<br>如果不同的碰撞域使用不同的数据率，那么就不能用集线器将它们互连起来。</p><p><strong>3.4.2 在数据链路层扩展以太网</strong><br>扩展以太网更常用的方法是在数据链路层进行。<br>早期使用<strong>网桥</strong>，现在使用以太网<strong>交换机</strong>。<br><strong>网桥</strong>工作在数据链路层。<br>它根据 MAC 帧的目的地址对收到的帧进行<strong>转发和过滤</strong>。<br>当网桥收到一个帧时，并不是向所有的接口转发此帧，而是先检查此帧的目的 MAC 地址，然后再确定将该帧转发到哪一个接口，或把它丢弃。<br>1990 年问世的交换式集线器 (switching hub) 可明显地提高以太网的性能。<br><strong>交换式集线器</strong>常称为<strong>以太网交换机</strong> (switch) 或<strong>第二层交换机</strong> (L2 switch)，强调这种交换机工作在数据链路层。</p><p>以太网交换机的<strong>特点</strong><br>以太网交换机实质上就是一个<strong>多接口的网桥</strong>。通常都有十几个或更多的接口。<br>每个接口都直接与一个单台主机或另一个以太网交换机相连，并且一般都工作在<strong>全双工方式</strong>。<br>以太网交换机<strong>具有并行性</strong>，能同时连通多对接口，使多对主机能同时通信。<br>相互通信的主机都是独占传输媒体，无碰撞地传输数据。<br>以太网交换机的接口有存储器，能在输出端口繁忙时把到来的帧进行缓存。<br>以太网交换机是一种<strong>即插即用</strong>设备，其内部的帧交换表（又称为地址表）是通过自学习算法自动地逐渐建立起来的。<br>以太网交换机使用了专用的交换结构芯片，用硬件转发，其转发速率要比使用软件转发的网桥快很多。</p><p>以太网交换机的<strong>优点</strong><br>用户独享带宽，增加了总容量。<br>对于普通 10 Mbit/s 的共享式以太网，若共有 N 个用户，则每个用户占有的平均带宽只有总带宽 (10 Mbit/s) 的 N 分之一。<br>使用以太网交换机时，虽然在每个接口到主机的带宽还是 10 Mbit/s，但由于一个用户在通信时是独占而不是和其他网络用户共享传输媒体的带宽，因此对于拥有 N 个接口的交换机的总容量为 N10 Mbit/s。<br>从共享总线以太网转到交换式以太网时，所有接入设备的软件和硬件、适配器等都不需要做任何改动。<br>以太网交换机一般都具有多种速率的接口，方便了各种不同情况的用户。</p><p>以太网交换机的<strong>交换方式</strong><br><strong>存储转发方式</strong>：把整个数据帧先缓存后再进行处理。<br><strong>直通 (cut-through) 方式</strong>：<br>接收数据帧的同时就立即按数据帧的目的 MAC 地址决定该帧的转发接口，因而提高了帧的转发速度。<br><strong>缺点</strong>是它不检查差错就直接将帧转发出去，因此有可能也将一些无效帧转发给其他的站。<br>在某些情况下，仍需要采用基于软件的存储转发方式进行交换，例如，当需要进行线路速率匹配、协议转换或差错检测时。</p><p>以太网交换机的<strong>自学习功能</strong><br>以太网交换机运行自学习算法自动维护<strong>交换表</strong>。<br>开始时，以太网交换机里面的交换表是空的。</p><p><em>按照以下自学习算法，处理收到的帧和建立交换表</em><br>A 先向 B 发送一帧，从接口 1 进入到交换机。<br>交换机收到帧后，先查找交换表，没有查到应从哪个接口转发这个帧。<br>交换机把这个帧的源地址 A 和接口 1 写入交换表中，并向除接口 1 以外的所有的接口广播这个帧。<br>C 和 D 将丢弃这个帧，因为目的地址不对。只 B 才收下这个目的地址正确的帧。这也称为过滤。<br>从新写入交换表的项目 (A, 1) 可以看出，以后不管从哪一个接口收到帧，只要其目的地址是 A，就应当把收到的帧从接口 1 转发出去。<br>B 通过接口 3 向 A 发送一帧。<br>交换机查找交换表，发现交换表中的 MAC 地址有 A。表明要发送给 A 的帧（即目的地址为 A 的帧）应从接口 1 转发。于是就把这个帧传送到接口 1 转发给 A。显然，现在已经没有必要再广播收到的帧。<br>交换表这时新增加的项目 (B, 3)，表明今后如有发送给 B 的帧，就应当从接口 3 转发出去。<br>经过一段时间后，只要主机 C 和 D 也向其他主机发送帧，以太网交换机中的交换表就会把转发到 C 或 D 应当经过的接口号（2 或 4）写入到交换表中。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200605113321840.png" alt="image-20200605113321840"><br>考虑到可能有时要在交换机的接口更换主机，或者主机要更换其网络适配器，这就需要更改交换表中的项目。为此，在交换表中每个项目都设有一定的有效时间。过期的项目就自动被删除。</p><p>交换机自学习和转发帧的步骤归纳<br>交换机收到一帧后先进行自学习。查找交换表中与收到帧的源地址有无相匹配的项目。<br>如没有，就在交换表中增加一个项目（源地址、进入的接口和有效时间）。<br>如有，则把原有的项目进行更新（进入的接口或有效时间）。<br>转发帧。查找交换表中与收到帧的目的地址有无相匹配的项目。<br>如没有，则向所有其他接口（进入的接口除外）转发。<br>如有，则按交换表中给出的接口进行转发。<br>若交换表中给出的接口就是该帧进入交换机的接口，则应丢弃这个帧（因为这时不需要经过交换机进行转发）。</p><p>增加冗余链路时，自学习的过程就可能导致以太网帧在网络的某个环路中无限制地兜圈子。<br>按交换机自学习和转发方法，该帧的某个走向如下：离开交换机 #1 的接口 3 → 交换机 #2 的接口 1 → 接口 2 → 交换机 #1 的接口 4 → 接口 3 → 交换机 #2 的接口 1 →……。这样就无限制地循环兜圈子下去，白白消耗了网络资源。<br>所以 IEEE 802.1D 标准制定了一个<strong>生成树协议 STP</strong> (Spanning Tree Protocol)。<br>其要点是：不改变网络的实际拓扑，但在逻辑上则切断某些链路，使得从一台主机到所有其他主机的路径是无环路的树状结构，从而消除了兜圈子现象。</p><p>从总线以太网到星形以太网<br>早期，以太网采用无源的总线结构。<br>现在，采用以太网交换机的星形结构成为以太网的首选拓扑。<br>总线以太网使用 CSMA/CD 协议，以半双工方式工作。<br>以太网交换机不使用共享总线，没有碰撞问题，因此不使用 CSMA/CD 协议，而是以全双工方式工作。但<strong>仍然采用以太网的帧结构</strong>。</p><p><strong>3.4.3 虚拟局域网</strong><br>利用以太网交换机可以很方便地实现虚拟局域网 VLAN (Virtual LAN)。<br><strong>虚拟局域网 VLAN</strong> 是由一些局域网网段构成的与物理位置无关的逻辑组，而这些网段具有某些共同的需求。每一个 VLAN 的帧都有一个明确的标识符，指明发送这个帧的计算机是属于哪一个 VLAN。<br>虚拟局域网其实只是局域网给用户提供的一种服务，而并不是一种新型局域网。<br>由于虚拟局域网是用户和网络资源的逻辑组合，因此可按照需要将有关设备和资源非常方便地重新组合，使用户从不同的服务器或数据库中存取所需的资源。<br>虚拟局域网限制了接收广播信息的工作站数，使得网络不会因传播过多的广播信息 (即 “<strong>广播风暴</strong>”) 而引起性能恶化。</p><p>虚拟局域网使用的<strong>以太网帧格式</strong><br>IEEE 批准了 802.3ac 标准，该标准定义了以太网的帧格式的扩展，以支持虚拟局域网。<br>虚拟局域网协议允许在以太网的帧格式中插入一个 4 字节的标识符，称为 <strong>VLAN 标记 (tag)</strong>，用来指明发送该帧的计算机属于哪一个虚拟局域网。<br>插入 VLAN 标记得出的帧称为 <strong>802.1Q 帧</strong> 或 <strong>带标记的以太网帧</strong>。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200605114055211.png" alt="image-20200605114055211"></p><h2 id="35-高速以太网"><a class="anchor" href="#35-高速以太网">#</a> 3.5 高速以太网</h2><p><strong>3.5.1 100BASE-T 以太网</strong><br>速率达到或超过 100 Mbit/s 的以太网称为<strong>高速以太网</strong>。<br>100BASE-T 在双绞线上传送 100 Mbit/s 基带信号的星形拓扑以太网，仍使用 IEEE 802.3 的 CSMA/CD 协议。<br>100BASE-T 以太网又称为<strong>快速以太网</strong> (Fast Ethernet)。<br>1995 年 IEEE 已把 100BASE-T 的快速以太网定为正式标准，其代号为 <strong>IEEE 802.3u</strong>。</p><p>100BASE-T 以太网的<strong>特点</strong><br>可在全双工方式下工作而无冲突发生。在全双工方式下工作时，不使用 CSMA/CD 协议。<br>MAC 帧格式仍然是 802.3 标准规定的。<br>保持最短帧长不变，但将一个网段的<strong>最大电缆长度减小</strong>到 100 m。<br>帧间时间间隔从原来的 9.6 us 改为现在的 0.96 us。</p><p>100 Mbit/s 以太网的三种不同的物理层标准<br>100BASE-TX<br>使用 2 对 UTP 5 类线 或 屏蔽双绞线 STP。<br>网段最大程度：100 米。<br>100BASE-T4<br>使用 4 对 UTP 3 类线 或 5 类线。<br>网段最大程度：100 米。<br>100BASE-FX<br>使用 2 对光纤。<br>网段最大程度：2000 米。</p><p><strong>3.5.2 吉比特以太网</strong><br>允许在 1 Gbit/s 下以全双工和半双工两种方式工作。<br>使用 IEEE 802.3 协议规定的帧格式。<br>在半双工方式下使用 CSMA/CD 协议，全双工方式不使用 CSMA/CD 协议。<br>与 10BASE-T 和 100BASE-T 技术向后兼容。</p><p>吉比特以太网的物理层使用两种成熟的技术：一种来自现有的以太网，另一种则是美国国家标准协会 ANSI 制定的光纤通道 FC (Fiber Channel)。</p><p><strong>半双工</strong>方式工作的吉比特以太网<br>吉比特以太网工作在半双工方式时，就必须进行碰撞检测。<br>为保持 64 字节最小帧长度，以及 100 米的网段的最大长度，吉比特以太网增加了两个功能：<br><strong>载波延伸 (carrier extension)</strong><br><strong>分组突发 (packet bursting)</strong></p><p>载波延伸<br>使最短帧长仍为 64 字节（这样可以保持兼容性），同时将<strong>争用时间增大</strong>为 512 字节。<br>凡发送的 MAC 帧长不足 512 字节时，就用一些特殊字符填充在帧的后面，使 MAC 帧的发送长度增大到 512 字节。接收端在收到以太网的 MAC 帧后，要将所填充的特殊字符删除后才向高层交付。<br>分组突发<br>当很多短帧要发送时，第一个短帧要采用载波延伸方法进行填充，随后的一些短帧则可一个接一个地发送，只需留有必要的帧间最小间隔即可。这样就形成可一串分组的突发，直到达到 1500 字节或稍多一些为止。</p><p>当吉比特以太网工作在全双工方式时（即通信双方可同时进行发送和接收数据），不使用载波延伸和分组突发。<br><img data-src="https://twelveeee-note.oss-cn-beijing.aliyuncs.com/Image/image-20200605115110122.png" alt="image-20200605115110122"></p><p><strong>3.5.3 10 吉比特以太网 (10GE) 和更快的以太网</strong><br>10 吉比特以太网（10GE）并非把吉比特以太网的速率简单地提高到 10 倍，其主要特点有：<br>与 10 Mbit/s、100 Mbit/s 和 1 Gbit/s 以太网的<strong>帧格式完全相同</strong>。<br>保留了 802.3 标准规定的以太网最小和最大帧长，便于升级。<br>不再使用铜线而<strong>只使用光纤</strong>作为传输媒体。<br><strong>只工作在全双工</strong>方式，因此没有争用问题，也不使用 CSMA/CD 协议。</p><p><strong>更快的以太网</strong><br>以太网的技术发展得很快。<br>在 10GE 之后又制订了 40GE/100GE（即 40 吉比特以太网和 100 吉比特以太网）的标准 IEEE 802.3ba-2010 和 802.3bm-2015。<br>40GE/100GE 只工作在全双工的传输方式（因而不使用 CSMA/CD 协议），并仍保持了以太网的帧格式以及 802.3 标准规定的以太网最小和最大帧长。<br>100GE 在使用单模光纤传输时，仍然可以达到 40 km 的传输距离，但这是需要波分复用（使用 4 个波长复用一根光纤，每一个波长的有效传输速率是 25 Gbit/s）。</p><p>端到端的以太网传输<br>以太网的工作范围已经从局域网（校园网、企业网）扩大到城域网和广域网，从而实现了端到端的以太网传输。<br>这种工作方式的<strong>好处</strong>有：<br>技术成熟；<br>互操作性很好；<br>在广域网中使用以太网时价格便宜；<br>采用统一的以太网帧格式，简化了操作和管理。</p><p>以太网从 10 Mbit/s 到 100 Gbit/s 的演进证明了以太网是：<br>可扩展的（从 10 Mbit/s 到 100 Gbit/s）；<br>灵活的（多种传输媒体、全 / 半双工、共享 / 交换）；<br>易于安装；<br>稳健性好。</p><p><strong>3.5.4 使用以太网进行宽带接入</strong><br>IEEE 在 2001 年初成立了 802.3 EFM 工作组，专门研究高速以太网的宽带接入技术问题。<br>以太网宽带接入具有以下<strong>特点</strong>：<br>可以提供<strong>双向</strong>的宽带通信。<br>可以根据用户对带宽的需求灵活地进行带宽<strong>升级</strong>。<br>可以实现端到端的以太网传输，中间<strong>不需要再进行帧格式的转换</strong>。这就提高了数据的传输效率且降低了传输的成本。<br>但是<strong>不支持用户身份鉴别</strong>。</p><p>PPPoE<br><strong>PPPoE (PPP over Ethernet)</strong> 的意思是 “在以太网上运行 PPP”，它把 PPP 协议与以太网协议结合起来 —— 将 PPP 帧再封装到以太网中来传输。<br>现在的光纤宽带接入 FTTx 都要使用 PPPoE 的方式进行接入。在 PPPoE 弹出的窗口中键入在网络运营商购买的用户名和密码，就可以进行宽带上网了。<br>利用 ADSL 进行宽带上网时，从用户个人电脑到家中的 ADSL 调制解调器之间，也是使用 RJ-45 和 5 类线（即以太网使用的网线）进行连接的，并且也是使用 PPPoE 弹出的窗口进行拨号连接的。</p></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2025-02-28 19:33:40" itemprop="dateModified" datetime="2025-02-28T19:33:40+08:00">2025-02-28</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Twelveeee <i class="ic i-at"><em>@</em></i>十二的编程笔记</li><li class="link"><strong>本文链接：</strong> <a href="https://blog.twelveeee.top/2020/NetworkPrinciples/data%20link%20layer/" title="数据链路层">https://blog.twelveeee.top/2020/NetworkPrinciples/data link layer/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2020/DataStructure/Sort/assignment%20sort/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;twelveeee-note.oss-cn-beijing.aliyuncs.com&#x2F;Image&#x2F;img&#x2F;bgimg_62.webp" title="排序"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 排序</span><h3>排序</h3></a></div><div class="item right"><a href="/2020/NetworkPrinciples/network%20layer/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;twelveeee-note.oss-cn-beijing.aliyuncs.com&#x2F;Image&#x2F;img&#x2F;bgimg_95.webp" title="网络层"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 网络原理</span><h3>网络层</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#3%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">1.</span> <span class="toc-text">3. 数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#31-%E4%BD%BF%E7%94%A8%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">1.1.</span> <span class="toc-text">3.1 使用点对点信道的数据链路层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#32-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AE-ppp"><span class="toc-number">1.2.</span> <span class="toc-text">3.2 点对点协议 PPP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#33-%E4%BD%BF%E7%94%A8%E5%B9%BF%E6%92%AD%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">1.3.</span> <span class="toc-text">3.3 使用广播信道的数据链路层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#34-%E6%89%A9%E5%B1%95%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">1.4.</span> <span class="toc-text">3.4 扩展的以太网</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#35-%E9%AB%98%E9%80%9F%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">1.5.</span> <span class="toc-text">3.5 高速以太网</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2020/NetworkPrinciples/intro/" rel="bookmark" title="网络原理概述">网络原理概述</a></li><li><a href="/2020/NetworkPrinciples/physical%20layer/" rel="bookmark" title="物理层">物理层</a></li><li class="active"><a href="/2020/NetworkPrinciples/data%20link%20layer/" rel="bookmark" title="数据链路层">数据链路层</a></li><li><a href="/2020/NetworkPrinciples/network%20layer/" rel="bookmark" title="网络层">网络层</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Twelveeee" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Twelveeee</p><div class="description" itemprop="description">十二的编程笔记</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">117</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">30</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">26</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3R3ZWx2ZWVlZQ==" title="https:&#x2F;&#x2F;github.com&#x2F;twelveeee"><i class="ic i-github"></i></span> <span class="exturl item email" data-url="bWFpbHRvOnR3ZWx2ZWVlZTEyQGdtYWlsLmNvbQ==" title="mailto:twelveeee12@gmail.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><span class="exturl" data-url="aHR0cHM6Ly93d3cudHJhdmVsbGluZ3MuY24vZ28uaHRtbA=="><i class="ic i-paper-plane"></i>开往</span></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2020/DataStructure/Sort/assignment%20sort/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2020/NetworkPrinciples/network%20layer/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/computerScience/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/dataStructure/" title="分类于 数据结构">数据结构</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/dataStructure/%E6%8E%92%E5%BA%8F/" title="分类于 排序">排序</a></div><span><a href="/2020/DataStructure/Sort/selection%20sort/" title="选择类排序">选择类排序</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computerScience/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/Elasticsearch/" title="分类于 Elasticsearch">Elasticsearch</a></div><span><a href="/2021/Search/ElasticSearch/data_operations_concurrent/" title="Elasticsearch 并发处理">Elasticsearch 并发处理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computerScience/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/GO/" title="分类于 GO">GO</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/GO/Lib/" title="分类于 Lib">Lib</a></div><span><a href="/2023/Go/Lib/zerolog/" title="Go zerolog 使用">Go zerolog 使用</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computerScience/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/dataStructure/" title="分类于 数据结构">数据结构</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/dataStructure/%E6%8E%92%E5%BA%8F/" title="分类于 排序">排序</a></div><span><a href="/2020/DataStructure/Sort/merge%20sort/" title="归并排序">归并排序</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computerScience/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/Cache/" title="分类于 Cache">Cache</a></div><span><a href="/2021/Cache/LocalCache/" title="LocalCache 简介">LocalCache 简介</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computerScience/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/Search/" title="分类于 Search">Search</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/Search/Elasticsearch/" title="分类于 Elasticsearch">Elasticsearch</a></div><span><a href="/2021/Search/ElasticSearch/mapping/" title="Elasticsearch 映射">Elasticsearch 映射</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computerScience/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/AI/" title="分类于 AI">AI</a></div><span><a href="/2020/AI/intro%20of%20Neural%20Network/" title="神经网络简介">神经网络简介</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computerScience/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/Project/" title="分类于 Project">Project</a></div><span><a href="/2024/Project/copilot-gpt4-service-ban/" title="GitHub Copilot封号及退款过程">GitHub Copilot封号及退款过程</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computerScience/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/GO/" title="分类于 GO">GO</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/GO/Lib/" title="分类于 Lib">Lib</a></div><span><a href="/2023/Go/Lib/io/" title="Go 标准库源码解析-IO操作">Go 标准库源码解析-IO操作</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computerScience/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computerScience/highAvailability/" title="分类于 高可用">高可用</a></div><span><a href="/2023/HighAvailability/rate_limiter/" title="分布式限流设计与实现">分布式限流设计与实现</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2020 – <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Twelveeee @ Twelveeee</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">588k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">8:54</span></div><div class="beian-by"><a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener noreferrer">闽ICP备20004781号</a></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2020/NetworkPrinciples/data link layer/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=default,fetch"></script><script src="//fastly.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script data-pjax>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?30195a9a0f4d22cd45e9d770a10c683f";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-F27X623LWT"></script><script data-pjax>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-F27X623LWT")</script>--></body></html>